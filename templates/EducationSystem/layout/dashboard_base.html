{% extends "EducationSystem/base.html" %} {% load static %} {% block head %}
<link
  rel="stylesheet"
  href="{% static 'EducationSystem/css/dashboard.css' %}"
/>
<style>
  .dashboard-container {
    border: 4px solid #38adf5;
    border-radius: 25px;
    margin: 20px;
    min-height: calc(100vh - 48px);
  }

  .top-header {
    background: #abd5f5;
    padding: 12px 25px;
    border-bottom: 2px solid #d4ecff;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .menu-items {
    display: flex;
    gap: 20px;
  }

  .menu-items a {
    background: #787e87;
    padding: 10px 18px;
    border-radius: 20px;
    font-size: 14px;
    transition: all 0.2s;
    text-decoration: none;
    color: white;
  }
  .menu-items a:first-child {
    background: #3425bd;
  }

  .menu-items a:hover {
    background: #b6cee8;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .term-box {
    background: #2ecc71;
    color: white;
    padding: 6px 14px;
    border-radius: 20px;
    font-weight: bold;
  }
  .profile-box {
    background: #3425bd;
    color: white;
    padding: 6px 14px;
    border-radius: 20px;
    font-weight: bold;
  }

  main {
    padding: 40px;
  }
</style>
{% endblock %} {% block body %}

<div class="dashboard-container">
  <!-- هدر اصلی شبیه عکس -->
  <header class="top-header">
    <!-- منوها -->
    <nav class="menu-items">
      <a href="{% url 'dashboard' %}">
        <img
          src="{% static 'EducationSystem/images/home white 2.png' %}"
          alt="خانه"
          style="width: 20px; vertical-align: middle"
        />
      </a>
      <a href="{% url 'course_selection' %}">انتخاب واحد</a>
      <a href="#">امور مالی</a>
      <a href="#">دروس نیمسال</a>
      <a href="#">کارنامه دانشجویی</a>
    </nav>

    <!-- بخش چپ | نشان دادن ترم -->
    <div class="header-right">
      <div class="term-box">{{ name|default:"4041" }}</div>
      <div
        class="profile-box"
        style="display: flex; align-items: center; gap: 8px"
      >
        <img
          src="{% static 'EducationSystem/images/person white 2.png' %}"
          alt="User"
          style="width: 22px"
        />
        <span id="header-student-name">{{ term|default:"پانیذ بهارجاه" }}</span>
      </div>

      <div class="user-box flex items-center">
        <span id="header-full-name"
          >{{ request.user.first_name }} {{ request.user.last_name }}</span
        >
      </div>
    </div>
  </header>

  <!-- محتوای اصلی صفحه -->
  <main>{% block dashboard_content %} {% endblock %}</main>
</div>

{% block scripts %}
<script src="{% static 'EducationSystem/js/dashboard.js' %}"></script>
<script>
  // Load student basic info for header
  function loadHeaderStudentInfo() {
    fetch("/api/student/profile/basic/", {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      },
      credentials: "same-origin",
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.fullName) {
          document.getElementById("header-student-name").textContent =
            data.fullName;
          document.getElementById("header-full-name").textContent =
            data.fullName;
        }
      })
      .catch((error) => {
        console.error("Error loading header student info:", error);
      });
  }

  // Load on page load
  document.addEventListener("DOMContentLoaded", loadHeaderStudentInfo);
</script>
{% endblock %} {% endblock %}
